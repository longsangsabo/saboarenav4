# ‚úÖ CORRECT SABO DE16 Structure - 27 Matches

## üìä Overview
- **Winner Bracket**: 14 matches (3 rounds: 8+4+2)
- **Loser Branch A**: 7 matches (3 rounds: 4+2+1) - receives WB R1 losers
- **Loser Branch B**: 3 matches (2 rounds: 2+1) - receives WB R2 losers
- **SABO Finals**: 3 matches (2 semifinals + 1 final)
- **Total**: 27 matches (no bracket reset)

---

## üéØ Key Differences from Standard DE16

| Feature | Standard DE16 | SABO DE16 |
|---------|---------------|-----------|
| Total Matches | 31-32 | 27 |
| WB Rounds | 4 (8+4+2+1) | 3 (8+4+2) |
| LB Structure | Unified 6 rounds | Split into 2 branches |
| Finals Format | 1v1 (WB vs LB champion) | 4-player (2 WB + 2 LB) |
| Bracket Reset | Yes (if LB wins) | No |
| WB Final | Yes (1 match) | No (stops at 2 players) |

---

## üèÜ WINNER BRACKET (14 matches)

### WB Round 1 - 8 matches (Display Order: 1101-1108)
| Match | Display | Players | Winner ‚Üí | Loser ‚Üí |
|-------|---------|---------|----------|---------|
| 1 | 1101 | P1 vs P2 | 1201 (M9) | 2101 (M15) |
| 2 | 1102 | P3 vs P4 | 1201 (M9) | 2101 (M15) |
| 3 | 1103 | P5 vs P6 | 1202 (M10) | 2102 (M16) |
| 4 | 1104 | P7 vs P8 | 1202 (M10) | 2102 (M16) |
| 5 | 1105 | P9 vs P10 | 1203 (M11) | 2103 (M17) |
| 6 | 1106 | P11 vs P12 | 1203 (M11) | 2103 (M17) |
| 7 | 1107 | P13 vs P14 | 1204 (M12) | 2104 (M18) |
| 8 | 1108 | P15 vs P16 | 1204 (M12) | 2104 (M18) |

**Logic**: 8 losers ‚Üí Loser Branch A (4 matches)

### WB Round 2 - 4 matches (Display Order: 1201-1204)
| Match | Display | Winner ‚Üí | Loser ‚Üí |
|-------|---------|----------|---------|
| 9 | 1201 | 1301 (M13) | 3101 (M23) |
| 10 | 1202 | 1301 (M13) | 3102 (M24) |
| 11 | 1203 | 1302 (M14) | 3101 (M23) |
| 12 | 1204 | 1302 (M14) | 3102 (M24) |

**Logic**: 4 losers ‚Üí Loser Branch B (2 matches)

### WB Round 3 - 2 matches (Display Order: 1301-1302)
| Match | Display | Winner ‚Üí | Loser ‚Üí | Note |
|-------|---------|----------|---------|------|
| 13 | 1301 | 4101 (Semi1) | - | ‚ö†Ô∏è NO LOSER ADVANCE |
| 14 | 1302 | 4102 (Semi2) | - | ‚ö†Ô∏è NO LOSER ADVANCE |

**‚ö†Ô∏è CRITICAL**: WB stops here! No WB Final. 2 winners go directly to SABO Finals semifinals.

---

## üíî LOSER BRANCH A (7 matches)
**Receives**: WB R1 losers (8 players)

### LB-A Round 1 - 4 matches (Display Order: 2101-2104)
| Match | Display | Receives | Winner ‚Üí | Loser ‚Üí |
|-------|---------|----------|----------|---------|
| 15 | 2101 | Loser M1 vs Loser M2 | 2201 (M19) | ELIMINATED |
| 16 | 2102 | Loser M3 vs Loser M4 | 2201 (M19) | ELIMINATED |
| 17 | 2103 | Loser M5 vs Loser M6 | 2202 (M20) | ELIMINATED |
| 18 | 2104 | Loser M7 vs Loser M8 | 2202 (M20) | ELIMINATED |

**Logic**: 8 WB R1 losers ‚Üí 4 matches (paired 1+2, 3+4, 5+6, 7+8)

### LB-A Round 2 - 2 matches (Display Order: 2201-2202)
| Match | Display | Receives | Winner ‚Üí | Loser ‚Üí |
|-------|---------|----------|----------|---------|
| 19 | 2201 | Winner M15 vs Winner M16 | 2301 (M21) | ELIMINATED |
| 20 | 2202 | Winner M17 vs Winner M18 | 2301 (M21) | ELIMINATED |

**Logic**: 4 LB-A R1 winners ‚Üí 2 matches

### LB-A Round 3 / Final - 1 match (Display Order: 2301)
| Match | Display | Receives | Winner ‚Üí | Loser ‚Üí |
|-------|---------|----------|----------|---------|
| 21 | 2301 | Winner M19 vs Winner M20 | 4101 (Semi1) | ELIMINATED |

**Logic**: 2 LB-A R2 winners ‚Üí 1 Branch A champion ‚Üí Goes to SABO Finals Semi1

---

## üíî LOSER BRANCH B (3 matches)
**Receives**: WB R2 losers (4 players)

### LB-B Round 1 - 2 matches (Display Order: 3101-3102)
| Match | Display | Receives | Winner ‚Üí | Loser ‚Üí |
|-------|---------|----------|----------|---------|
| 22 | 3101 | Loser M9 vs Loser M11 | 3201 (M25) | ELIMINATED |
| 23 | 3102 | Loser M10 vs Loser M12 | 3201 (M25) | ELIMINATED |

**Logic**: 4 WB R2 losers ‚Üí 2 matches

### LB-B Round 2 / Final - 1 match (Display Order: 3201)
| Match | Display | Receives | Winner ‚Üí | Loser ‚Üí |
|-------|---------|----------|----------|---------|
| 24 | 3201 | Winner M22 vs Winner M23 | 4102 (Semi2) | ELIMINATED |

**Logic**: 2 LB-B R1 winners ‚Üí 1 Branch B champion ‚Üí Goes to SABO Finals Semi2

---

## üèÖ SABO FINALS (3 matches)
**4-player format**: 2 WB champions + 2 LB champions

### Semifinal 1 (Display Order: 4101)
| Match | Display | Receives | Winner ‚Üí | Loser ‚Üí |
|-------|---------|----------|----------|---------|
| 25 | 4101 | WB R3 M13 winner vs LB-A champion (M21) | 4201 (Final) | 3rd place |

**Logic**: WB champion #1 vs Loser Branch A champion

### Semifinal 2 (Display Order: 4102)
| Match | Display | Receives | Winner ‚Üí | Loser ‚Üí |
|-------|---------|----------|----------|---------|
| 26 | 4102 | WB R3 M14 winner vs LB-B champion (M24) | 4201 (Final) | 4th place |

**Logic**: WB champion #2 vs Loser Branch B champion

### SABO Finals (Display Order: 4201)
| Match | Display | Receives | Winner ‚Üí | Loser ‚Üí |
|-------|---------|----------|----------|---------|
| 27 | 4201 | Semi1 winner vs Semi2 winner | null | Runner-up |

**Logic**: Winner = TOURNAMENT CHAMPION

---

## üéØ Display Order Formula

```
display_order = (bracket_priority √ó 1000) + (stage_round √ó 100) + match_position

Winner Bracket (priority = 1):
- WB R1 M1: (1 √ó 1000) + (1 √ó 100) + 1 = 1101
- WB R3 M2: (1 √ó 1000) + (3 √ó 100) + 2 = 1302

Loser Branch A (priority = 2):
- LB-A R1 M1: (2 √ó 1000) + (1 √ó 100) + 1 = 2101
- LB-A R3 Final: (2 √ó 1000) + (3 √ó 100) + 1 = 2301

Loser Branch B (priority = 3):
- LB-B R1 M1: (3 √ó 1000) + (1 √ó 100) + 1 = 3101
- LB-B R2 Final: (3 √ó 1000) + (2 √ó 100) + 1 = 3201

SABO Finals (priority = 4):
- Semi1: (4 √ó 1000) + (1 √ó 100) + 1 = 4101
- Semi2: (4 √ó 1000) + (1 √ó 100) + 2 = 4102
- Final: (4 √ó 1000) + (2 √ó 100) + 1 = 4201
```

---

## ‚úÖ Advancement Map Summary

```dart
// ========== WINNER BRACKET (14 matches) ==========

// WB R1 (8 matches ‚Üí display_order 1101-1108)
map[1] = {'winner': 1201, 'loser': 2101};
map[2] = {'winner': 1201, 'loser': 2101};
map[3] = {'winner': 1202, 'loser': 2102};
map[4] = {'winner': 1202, 'loser': 2102};
map[5] = {'winner': 1203, 'loser': 2103};
map[6] = {'winner': 1203, 'loser': 2103};
map[7] = {'winner': 1204, 'loser': 2104};
map[8] = {'winner': 1204, 'loser': 2104};

// WB R2 (4 matches ‚Üí display_order 1201-1204)
map[9] = {'winner': 1301, 'loser': 3101};
map[10] = {'winner': 1301, 'loser': 3102};
map[11] = {'winner': 1302, 'loser': 3101};
map[12] = {'winner': 1302, 'loser': 3102};

// WB R3 (2 matches ‚Üí display_order 1301-1302)
// ‚ö†Ô∏è NO LOSER ADVANCEMENT - WB stops here
map[13] = {'winner': 4101, 'loser': null};  // ‚Üí Semi1, no loser advance
map[14] = {'winner': 4102, 'loser': null};  // ‚Üí Semi2, no loser advance

// ========== LOSER BRANCH A (7 matches) ==========

// LB-A R1 (4 matches ‚Üí display_order 2101-2104)
map[15] = {'winner': 2201, 'loser': null};
map[16] = {'winner': 2201, 'loser': null};
map[17] = {'winner': 2202, 'loser': null};
map[18] = {'winner': 2202, 'loser': null};

// LB-A R2 (2 matches ‚Üí display_order 2201-2202)
map[19] = {'winner': 2301, 'loser': null};
map[20] = {'winner': 2301, 'loser': null};

// LB-A R3 Final (1 match ‚Üí display_order 2301)
map[21] = {'winner': 4101, 'loser': null};  // ‚Üí Semi1

// ========== LOSER BRANCH B (3 matches) ==========

// LB-B R1 (2 matches ‚Üí display_order 3101-3102)
map[22] = {'winner': 3201, 'loser': null};
map[23] = {'winner': 3201, 'loser': null};

// LB-B R2 Final (1 match ‚Üí display_order 3201)
map[24] = {'winner': 4102, 'loser': null};  // ‚Üí Semi2

// ========== SABO FINALS (3 matches) ==========

// Semifinals (2 matches ‚Üí display_order 4101-4102)
map[25] = {'winner': 4201, 'loser': null};  // Semi1 ‚Üí Final
map[26] = {'winner': 4201, 'loser': null};  // Semi2 ‚Üí Final

// Final (1 match ‚Üí display_order 4201)
map[27] = {'winner': null, 'loser': null};  // Champion!
```

---

## üîß Implementation Notes

1. **Match Creation**: Create all 27 matches upfront (no dynamic creation)
2. **No Bracket Reset**: SABO format doesn't have bracket reset - finals is single elimination
3. **4-Player Finals**: Must track which players come from WB vs LB-A vs LB-B
4. **WB Stops Early**: WB R3 winners don't play each other before finals
5. **Placement**:
   - 1st: Finals winner
   - 2nd: Finals loser
   - 3rd: Semi1 loser (if not already placed)
   - 4th: Semi2 loser (if not already placed)

---

## üìù Round Tabs Display

Using `bracket_type` + `stage_round`:

**Winner Bracket**:
- V√íNG 1 (WB R1, stage_round=1)
- V√íNG 2 (WB R2, stage_round=2)
- V√íNG 3 (WB R3, stage_round=3)

**Loser Branch A**:
- B·∫¢NG THUA A1 (LB-A R1, stage_round=1)
- B·∫¢NG THUA A2 (LB-A R2, stage_round=2)
- B·∫¢NG THUA A3 (LB-A R3, stage_round=3)

**Loser Branch B**:
- B·∫¢NG THUA B1 (LB-B R1, stage_round=1)
- B·∫¢NG THUA B2 (LB-B R2, stage_round=2)

**SABO Finals**:
- B√ÅN K·∫æT (SABO Semifinals, stage_round=1)
- CHUNG K·∫æT (SABO Finals, stage_round=2)

**Total**: 10 tabs (3 WB + 3 LB-A + 2 LB-B + 2 Finals)

---

## üéÆ Tournament Flow

```
16 Players
    ‚Üì
WB R1 (8 matches) ‚Üí 8 winners, 8 losers
    ‚Üì                      ‚Üì
WB R2 (4 matches)    LB-A R1 (4 matches)
    ‚Üì                      ‚Üì
    4 winners, 4 losers   4 winners
    ‚Üì           ‚Üì          ‚Üì
WB R3 (2)   LB-B R1 (2)  LB-A R2 (2)
    ‚Üì           ‚Üì          ‚Üì
  2 WB      2 winners   LB-A R3 (1)
champions      ‚Üì          ‚Üì
    ‚Üì       LB-B R2 (1)  1 LB-A
    ‚Üì           ‚Üì       champion
    ‚Üì       1 LB-B        ‚Üì
    ‚Üì      champion       ‚Üì
    ‚Üì           ‚Üì         ‚Üì
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚Üì
    SABO Finals (4 players)
          ‚Üì
   Semi1        Semi2
     ‚Üì            ‚Üì
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ Final ‚îÄ‚îò
          ‚Üì
      CHAMPION
```

---

## ‚ö†Ô∏è Critical Differences

1. **NO WB FINAL**: Winners stop at R3 (2 players)
2. **2 LOSER BRANCHES**: Branch A (WB R1 losers), Branch B (WB R2 losers)
3. **4-PLAYER FINALS**: 2 from WB + 1 from LB-A + 1 from LB-B
4. **NO BRACKET RESET**: Finals is single elimination
5. **SHORTER**: 27 matches vs 31-32 in standard DE16

This format rewards consistency (staying in WB) but gives losers 2 separate paths to finals!
